<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>业务分析</title>
  <link href="../fh-ui/css/fh-ui.min.css" rel="stylesheet">
  <link href="../css/analysis.css" rel="stylesheet">
</head>

<body>
  <div class="pg-container">
    <div class="pg-hd">
      <h1 class="logo">F-Pointer</h1>
      <ul class="nav">
        <!--<li class="btn-group"><button type="button" class="btn btn-default"><a href="javascript:;">FP相关</a></button></li>-->
        <li class="btn-group"><button type="button" class="btn btn-default"><a href="./create.html">建表</a></button></li>
        <li class="btn-group">
          <button type="button" class="btn btn-default"><a href="./database_upload.html">日志检测</a></button>
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span class="caret"></span>
            <span class="sr-only">Toggle Dropdown</span>
          </button>
          <ul class="dropdown-menu">
            <li><a href="./fail_sql.html">不合格SQL展示</a></li>
            <li><a href="./error.html">报错信息展示</a></li>
          </ul>
        </li>
        <li class="btn-group current">
          <button type="button" class="btn btn-primary"><a href="./analysis.html">业务分析</a></button>
          <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span class="caret"></span>
            <span class="sr-only">Toggle Dropdown</span>
          </button>
          <ul class="dropdown-menu">
            <li><a href="./analysis_detail.html">业务分析详情</a></li>
            <li><a href="./sql_detail.html">SQL展示详情</a></li>
          </ul>
        </li>
      </ul>
      <a href="./fp.html" class="fp" title="FP小叮当"><span>FP小叮当</span><i class="aidicon aidicon-help-circle"></i></a>
    </div>
    <div class="pg-bd">
      <div class="content-wrapper"></div>
    </div>
  </div>
  </div>
  <script src="../fh-ui/js/lib/jquery/jquery.min.js"></script>
  <script src="../fh-ui/js/fh-ui.min.js"></script>
  <script>
    $('.btn-group').on('mouseenter', function () {
      if (!$(this).hasClass('current')) {
        $(this).find('.btn-default').removeClass('btn-default').addClass('btn-primary');
      }
    });
    $('.btn-group').on('mouseleave', function () {
      if (!$(this).hasClass('current')) {
        $(this).find('.btn-primary').removeClass('btn-primary').addClass('btn-default');
      }
    });
    $.ajax({
      url: '/project/all',
      type: 'GET',
      dataType: 'json'
    }).then(function (res) {
      console.log(res);
      var html = '';
      res.data.forEach(function(n) {
        var locationHtml = '<div class="card-body">';
        n.pjLocationList.forEach(function(n) {
          locationHtml += '<p>' + n + '</p>';
        });
        locationHtml += '</div>';
        html += '<div class="card card-bordered-gray"><a href="./analysis_detail.html?pjName='+ n.pjName +'&pjLocation='+ n.pjLocationList.join(',') +'"><div class="card-head"><div class="card-head-title">' + n.pjName + '</div></div>' + locationHtml + '</a></div>';
      });
      $('.content-wrapper').html($(html));
    })
  </script>
</body>

</html>